import{s as ue,e as h,c as d,b as _,d as u,j as p,i as w,n as re,K as de,F as j,t as k,a as T,p as $,f as B,k as c,q as A,h as _e,D as ae,o as ve,L as ge}from"../chunks/scheduler.BgxxztVZ.js";import{S as me,i as pe,c as M,a as U,m as K,t as O,b as z,d as J}from"../chunks/index.ecYRsrkj.js";import{B as Se}from"../chunks/button.BXLNZTmq.js";import{C as fe,e as he,T as be,r as ye,t as xe,s as we,a as ke,b as $e}from"../chunks/topbar.CzzfQ-n2.js";import{c as ne}from"../chunks/green-tick.BuVK5XQQ.js";import{g as Ee}from"../chunks/entry.5aApM5bE.js";import{e as le}from"../chunks/each.D6YF6ztN.js";import{b as Ce}from"../chunks/base-URL.C-JstKhi.js";const oe=""+new URL("../assets/clock.VDqtvuyM.png",import.meta.url).href;function ie(l,s,a){const t=l.slice();return t[1]=s[a],t}function ce(l){let s,a,t=l[1]+"",r,i;return{c(){s=h("div"),a=h("div"),r=k(t),i=T(),this.h()},l(e){s=d(e,"DIV",{class:!0});var n=_(s);a=d(n,"DIV",{class:!0});var v=_(a);r=$(v,t),v.forEach(u),i=B(n),n.forEach(u),this.h()},h(){p(a,"class","text-xs"),p(s,"class","flex align-middle p-2 gap-1 bg-[#F8F9FC] rounded-md")},m(e,n){w(e,s,n),c(s,a),c(a,r),c(s,i)},p(e,n){n&1&&t!==(t=e[1]+"")&&A(r,t)},d(e){e&&u(s)}}}function De(l){let s,a=le(l[0]),t=[];for(let r=0;r<a.length;r+=1)t[r]=ce(ie(l,a,r));return{c(){s=h("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){s=d(r,"DIV",{class:!0});var i=_(s);for(let e=0;e<t.length;e+=1)t[e].l(i);i.forEach(u),this.h()},h(){p(s,"class","flex pb-8 flex-wrap justify-center self-center max-w-xl gap-2")},m(r,i){w(r,s,i);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(s,null)},p(r,[i]){if(i&1){a=le(r[0]);let e;for(e=0;e<a.length;e+=1){const n=ie(r,a,e);t[e]?t[e].p(n,i):(t[e]=ce(n),t[e].c(),t[e].m(s,null))}for(;e<t.length;e+=1)t[e].d(1);t.length=a.length}},i:re,o:re,d(r){r&&u(s),de(t,r)}}}function Ie(l,s,a){let t;return j(l,fe,r=>a(0,t=r)),[t]}class Ve extends me{constructor(s){super(),pe(this,s,Ie,De,ue,{})}}let je=async(l,s,a,t,r)=>{const i=r+"/api/sendemail";let e=new FormData;e.append("message",s),e.append("subject",a),e.append("contacts",t),l&&e.append("transcript",l);try{const v=await(await fetch(i,{method:"POST",body:e})).json();return console.log("email sent"),he.set("Sent"),v.details}catch(n){return console.error("Error:",n),null}};function Te(l){let s,a,t=l[0]?" with the transcript":"",r,i;return{c(){s=h("p"),a=k(`After the summary has been completely generated, it will be sent\r
        automatically`),r=k(t),i=k("."),this.h()},l(e){s=d(e,"P",{class:!0});var n=_(s);a=$(n,`After the summary has been completely generated, it will be sent\r
        automatically`),r=$(n,t),i=$(n,"."),n.forEach(u),this.h()},h(){p(s,"class","subheading pt-4")},m(e,n){w(e,s,n),c(s,a),c(s,r),c(s,i)},p(e,n){n&1&&t!==(t=e[0]?" with the transcript":"")&&A(r,t)},d(e){e&&u(s)}}}function Be(l){let s,a,t=l[0]?" and transcript":"",r,i;return{c(){s=h("p"),a=k("Your summary"),r=k(t),i=k(` has been\r
        sent to the recipients below.`),this.h()},l(e){s=d(e,"P",{class:!0});var n=_(s);a=$(n,"Your summary"),r=$(n,t),i=$(n,` has been\r
        sent to the recipients below.`),n.forEach(u),this.h()},h(){p(s,"class","subheading pt-4")},m(e,n){w(e,s,n),c(s,a),c(s,r),c(s,i)},p(e,n){n&1&&t!==(t=e[0]?" and transcript":"")&&A(r,t)},d(e){e&&u(s)}}}function Pe(l){let s,a,t,r,i,e,n,v,E,b,P=l[1]=="Sent"?"Your Summary Has Been Sent":"Your Summary Will Be Sent",m,q,F,S,C,N="Recipients:",G,R,D,H,I,Y,x,V;s=new be({});function Q(o,f){return o[1]=="Sent"?Be:Te}let L=Q(l),g=L(l);return D=new Ve({}),x=new Se({props:{handleClick:l[2],type:l[1]=="Sent"?"primary":"disabled",text:"Send Another Summary"}}),{c(){M(s.$$.fragment),a=T(),t=h("div"),r=h("div"),i=h("div"),e=h("img"),E=T(),b=h("h1"),m=k(P),q=T(),g.c(),F=T(),S=h("div"),C=h("h3"),C.textContent=N,G=T(),R=h("h3"),M(D.$$.fragment),H=T(),I=h("div"),Y=h("div"),M(x.$$.fragment),this.h()},l(o){U(s.$$.fragment,o),a=B(o),t=d(o,"DIV",{class:!0});var f=_(t);r=d(f,"DIV",{class:!0});var y=_(r);i=d(y,"DIV",{class:!0});var X=_(i);e=d(X,"IMG",{class:!0,src:!0,alt:!0}),X.forEach(u),E=B(y),b=d(y,"H1",{class:!0});var Z=_(b);m=$(Z,P),Z.forEach(u),q=B(y),g.l(y),y.forEach(u),F=B(f),S=d(f,"DIV",{class:!0});var W=_(S);C=d(W,"H3",{class:!0,"data-svelte-h":!0}),_e(C)!=="svelte-12egha5"&&(C.textContent=N),G=B(W),R=d(W,"H3",{class:!0});var ee=_(R);U(D.$$.fragment,ee),ee.forEach(u),W.forEach(u),f.forEach(u),H=B(o),I=d(o,"DIV",{class:!0});var te=_(I);Y=d(te,"DIV",{class:!0});var se=_(Y);U(x.$$.fragment,se),se.forEach(u),te.forEach(u),this.h()},h(){p(e,"class","flex flex-row justify-center items-center p-0 flex-none order-none flex-grow-0 w-24 h-24"),ae(e.src,n=l[1]=="Sent"?ne:oe)||p(e,"src",n),p(e,"alt",v=l[1]=="Sent"?"Green Tick":"Clock"),p(i,"class","flex justify-center"),p(b,"class","pt-3 px-4"),p(r,"class","flex flex-col items-center pt-10"),p(C,"class","text-xl font-bold pr-8"),p(R,"class","font-normal flex flex-wrap"),p(S,"class","flex pt-10 gap-3.125"),p(t,"class","flex flex-col items-center pt-3 pb-10"),p(Y,"class","button-holder"),p(I,"class","absolute bottom-10 left-1/2 transform -translate-x-1/2")},m(o,f){K(s,o,f),w(o,a,f),w(o,t,f),c(t,r),c(r,i),c(i,e),c(r,E),c(r,b),c(b,m),c(r,q),g.m(r,null),c(t,F),c(t,S),c(S,C),c(S,G),c(S,R),K(D,R,null),w(o,H,f),w(o,I,f),c(I,Y),K(x,Y,null),V=!0},p(o,[f]){(!V||f&2&&!ae(e.src,n=o[1]=="Sent"?ne:oe))&&p(e,"src",n),(!V||f&2&&v!==(v=o[1]=="Sent"?"Green Tick":"Clock"))&&p(e,"alt",v),(!V||f&2)&&P!==(P=o[1]=="Sent"?"Your Summary Has Been Sent":"Your Summary Will Be Sent")&&A(m,P),L===(L=Q(o))&&g?g.p(o,f):(g.d(1),g=L(o),g&&(g.c(),g.m(r,null)));const y={};f&2&&(y.type=o[1]=="Sent"?"primary":"disabled"),x.$set(y)},i(o){V||(O(s.$$.fragment,o),O(D.$$.fragment,o),O(x.$$.fragment,o),V=!0)},o(o){z(s.$$.fragment,o),z(D.$$.fragment,o),z(x.$$.fragment,o),V=!1},d(o){o&&(u(a),u(t),u(H),u(I)),J(s,o),g.d(),J(D),J(x)}}}function Re(l,s,a){let t,r,i,e,n,v;j(l,xe,m=>a(4,t=m)),j(l,we,m=>a(0,r=m)),j(l,fe,m=>a(5,i=m)),j(l,ke,m=>a(6,e=m)),j(l,$e,m=>a(7,n=m)),j(l,he,m=>a(1,v=m));let E=!0;ve(()=>{b()});let b=async()=>{if(E)if(n=="Complete"){let m=e.summary;console.log(m);let q=e.subject,F=i,S=r?t.transcript:null;await je(S,m,q,F,Ce),E=!1}else setTimeout(()=>{b()},3e3)};return ge(()=>{E=!1}),[r,v,()=>{ye(),Ee("/upload_audio")}]}class Me extends me{constructor(s){super(),pe(this,s,Re,Pe,ue,{})}}export{Me as component};
